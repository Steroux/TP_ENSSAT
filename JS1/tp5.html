<html>

<head>
  <title>Tp JS</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="../style.css" />
</head>

<body class='bg-dark text-white'>
  <div class="full text-center row">
    <div class='bg-purple rounded text-center col-4 offset-4'>
      <h2>Liste des diff√©rents travaux</h2>
      <nav class='navbar navbar-brand'>
        <a href="../indexJS.html" class='m-1'>
          <button class='btn btn-secondary'>Accueil - JS</button>
        </a>
        <a href="./tp1.html" class='m-1'>
          <button class='btn btn-secondary'>Exo 1</button>
        </a>
        <a href="./tp2.html" class='m-1'>
          <button class='btn btn-secondary'>Exo 2</button>
        </a>
        <a href="./tp3.html" class='m-1'>
          <button class='btn btn-secondary'>Exo 3</button>
        </a>
        <a href="./tp4.html" class='m-1'>
          <button class='btn btn-secondary'>Exo 4</button>
        </a>
        <a href="./tp5.html" class='m-1'>
          <button class='btn btn-secondary'>Exo 5</button>
        </a>
      </nav>
    </div>
  </div>
  <div class="text-center">
    <h1>Canvas</h1>
    <canvas id="canvas" width="500" height="1500">
      Votre navigateur ne prend pas le canvas en charge
    </canvas>
  </div>
</body>
<script>

  let canvas = document.getElementById("canvas");
  let ctx = canvas.getContext("2d");
  ctx.fillStyle = "red";
  let x = 10, y = 10, w = 100, h = 100;
  let interval;
  let dixeme_secondes = 0;

  let squares = [];

  const createSquare = () => {
    for (i = 0; i < 10; i++) {
      ctx.fillRect(x, y, w, h);
      squares[i] = { x: x, y: y };
      y += 110;
    }
  };

  const moveSelf = (square) => {
    let xo = squares[square].x;
    let yo = squares[square].y;
    if (xo < 400 && dixeme_secondes >= 10 * i) {
      ctx.clearRect(xo, yo, w, h);
      xo += 10;
      ctx.fillRect(xo, yo, w, h);
    }
    return { x: xo, y: yo };
  }

  const moveGroup = (nbToMove) => {
    for (i = 0; i < nbToMove; i++) {
      squares[i] = moveSelf(i);
    }
    dixeme_secondes++;
  }

  const squareInterval = () => {
    clearInterval(interval);
    interval = setInterval(moveGroup, 100, 10);
  }

  const deplacement = () => {
    createSquare();
    interval = setInterval(squareInterval, 4000);
  };



  window.addEventListener("load", deplacement);
</script>

</html>