<html>
  <head>
    <title>Tp JS</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <h1>Canvas</h1>
    <canvas id="canvas" width="500" height="500">
      Votre navigateur ne prend pas le canvas en charge
    </canvas>
  </body>
  <script>
    const deplacement = () => {
      var canvas = document.getElementById("canvas");
      var ctx = canvas.getContext("2d");
      var x1 = 10,
        x2 = 10,
        x3 = 10;
      ctx.fillStyle = "red";
      // carré 1
      ctx.fillRect(x1, 10, 100, 100);
      // carré 2
      ctx.fillRect(x2, 120, 100, 100);
      // carré 3
      ctx.fillRect(x3, 240, 100, 100);
      let cpt = 0;
      const callback = () => {
          if (x1 < 400) {
            ctx.clearRect(x1, 10, 100, 100);
            x1 += 10;
            ctx.fillRect(x1, 10, 100, 100);
          }
          if (x2 < 400 && cpt >= 10) {
            // 10 = 1 seconde de décalage
            ctx.clearRect(x2, 120, 100, 100);
            x2 += 10;
            ctx.fillRect(x2, 120, 100, 100);
          }
          if (x3 < 400 && cpt >= 50) {
            //50 = 1seconde du premier carré + 4 secondes de décalage
            ctx.clearRect(x3, 240, 100, 100);
            x3 += 10;
            ctx.fillRect(x3, 240, 100, 100);
          }
        cpt++;
      };
      const interval = window.setInterval(callback, 100);
    };

    window.addEventListener("load", deplacement);
  </script>
</html>
